<ion-view  view-title="搜索">
  <ion-content overflow-scroll="false" on-drag="onDrag()">

    <div id="search-bar" class="bar bar-header item-input-inset" style="height: 50px;">
      <label class="item-input-wrapper" id="search-input">
        <i class="icon ion-ios-search" style="position: relative;color: gray;font-size: 1.5em;top: 1px;"></i>
        <form  onsubmit="dosearch(query)">
          <input  id="searchdata" style="padding-top: 3px;" type="search" placeholder="搜索" ng-model="query" ng-change="dosearch(query)" autocorrect="off" >
        </form>
      </label>
      <button class="button button-clear" style="color: #49B746;" ng-click="backSearchSM()" >取消</button>
    </div>

    <ion-list>
      <ion-item ng-repeat="item in lastMsg" style="height: 60px" >
        <div class="row" >
          <div  class="col-20" style="text-align: center" ng-click="goSearchMsgDetail(item.name)">
            <div ng-if="item.sessionid.substring((item.sessionid.length-1),item.sessionid.length)==1||item.sessionid.substring((item.sessionid.length-1),item.sessionid.length)==9" class="center circle1" style=" position: absolute;left: 7%;top: 19%;font-size: 14px;text-align: center;padding-top: 8px">{{item.name.length > 2 ? item.name.substring((item.name.length-2),item.name.length):item.name}}</div>
            <div ng-if="item.sessionid.substring((item.sessionid.length-1),item.sessionid.length)==2||item.sessionid.substring((item.sessionid.length-1),item.sessionid.length)==8" class="center circle2" style=" position: absolute;left: 7%;top: 19%;font-size: 14px;text-align: center;padding-top: 8px">{{item.name.length > 2 ? item.name.substring((item.name.length-2),item.name.length):item.name}}</div>
            <div ng-if="item.sessionid.substring((item.sessionid.length-1),item.sessionid.length)==3||item.sessionid.substring((item.sessionid.length-1),item.sessionid.length)==7" class="center circle3" style=" position: absolute;left: 7%;top: 19%;font-size: 14px;text-align: center;padding-top: 8px">{{item.name.length > 2 ? item.name.substring((item.name.length-2),item.name.length):item.name}}</div>
            <div ng-if="item.sessionid.substring((item.sessionid.length-1),item.sessionid.length)==4||item.sessionid.substring((item.sessionid.length-1),item.sessionid.length)==6" class="center circle4" style=" position: absolute;left: 7%;top: 19%;font-size: 14px;text-align: center;padding-top: 8px">{{item.name.length > 2 ? item.name.substring((item.name.length-2),item.name.length):item.name}}</div>
            <div ng-if="item.sessionid.substring((item.sessionid.length-1),item.sessionid.length)==5||item.sessionid.substring((item.sessionid.length-1),item.sessionid.length)==0" class="center circle5" style=" position: absolute;left: 7%;top: 19%;font-size: 14px;text-align: center;padding-top: 8px">{{item.name.length > 2 ? item.name.substring((item.name.length-2),item.name.length):item.name}}</div>
          </div>
          <div class="col-80 text-center" align="left" ng-click="goSearchMsgDetail(item.name)">
            <p style="font-size: 15px;position: absolute;left: 25%;top: 35%">{{item.name}}</p>
            <p  style="font-size: 15px;position: absolute;left: 45%;top: 35%">{{item.count}}条相关的聊天记录</p>
          </div>
        </div>
      </ion-item>
    </ion-list>
    <div ng-if="(lastMsg=='')||(lastMsg.length==0)||(lastMsg==null)">
      <div style="text-align: center;background-color: rgba(222, 222, 222, 0.79);width: 100%;font-size: 20px;padding-top: 5px;padding-bottom: 5px">历史搜索记录</div>
      <div ng-repeat="historymsg in historymsgs">
        <div style="width: auto;margin-left: 10px;padding-top: 20px;font-size: 20px" ng-click="dosearch(historymsg.msg)">
          <i class="ion-ios-search"></i>
          {{historymsg.msg}}
        </div>
      </div>
      <div style="text-align: center;width: 100%;font-size: 15px;padding-top: 20px;color: #0a80ff">清空历史记录</div>
    </div>
    <!--<ion-infinite-scroll ng-if="hasmore" on-infinite="loadMore()" distance="1%"></ion-infinite-scroll>-->
    <!-- ion-infinite-scroll 上拉加载数据指令 distance默认1% nf-if的值为false时，就禁止执行on-infinite  -->
  </ion-content>
</ion-view>

