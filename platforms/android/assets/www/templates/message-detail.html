<ion-view id="messageDetail" view-title={{viewtitle}}>
  <ion-nav-bar align-title="center">

    <ion-nav-buttons side="left">
      <button class="button  button-icon icon ion-ios-arrow-back" ng-click="backFirstMenu(groupType)">
        即时通
      </button>
    </ion-nav-buttons>

    <ion-nav-buttons side="right">
      <button class="button button-icon icon ion-ios-telephone" ng-click="callperson()"></button>
    </ion-nav-buttons>

    <ion-nav-buttons side="secondary">
      <button class="button button-icon icon ion-ios-person-outline" ng-click="personalSetting()"
              style="margin-right: 5px"></button>

    </ion-nav-buttons>

  </ion-nav-bar>
  <div style="position:fixed;left: 0px;right: 0px;top: 0px;bottom: 0px;width: 150px;height: 160px;margin: auto;background-color: #2c2c2c;z-index: 1000;text-align:center;" class="yuanjiao"
    ng-if="isShow === 'true'">
    <!---若录音时间小于1s，则展示这个--->
    <img style="padding-top:20px;width:100px;height: 100px;" ng-show= "duration <1000" src="img/chat_icon_voice_short.png"/>

    <!---分贝的六个等级--->
    <!--<img style="padding-top:20px;width:100px;height: 100px;" ng-show="rate ===0" src="img/chat_icon_voice1.png" />-->
    <img style="padding-top:20px;width:100px;height: 100px;" ng-show="rate ===0" src="img/chat_icon_voice2.png" />
    <img style="padding-top:20px;width:100px;height: 100px;" ng-show="rate ===1" src="img/chat_icon_voice3.png" />
    <img style="padding-top:20px;width:100px;height: 100px;" ng-show="rate ===2" src="img/chat_icon_voice4.png" />
    <img style="padding-top:20px;width:100px;height: 100px;" ng-show="rate ===3"src="img/chat_icon_voice5.png" />
    <img style="padding-top:20px;width:100px;height: 100px;" ng-show="rate ===4 || rate ===5"src="img/chat_icon_voice6.png" />
    <br />
    <p style="color: #FFFFFF;size: 13px;margin-right: auto;margin-right: auto;margin-top: 10px;" align="center" ng-hide="duration <1000">手指上滑,取消发送</p>
    <!---若录音时间小于1s，则展示这个--->
    <p style="color: #FFFFFF;size: 13px;margin-right: auto;margin-right: auto;margin-top: 10px;" align="center" ng-show= "duration <1000">说话时间太短</p>
  </div>
  <ion-content class="rj-stable-content" delegate-handle="messageDetailsScroll" on-drag="onDrag()" ng-click="zhiling()"
               id="contentaa">
    <ion-refresher refreshing-icon="ion-loading-c" on-refresh="doRefresh()" refreshing-text="获取数据中..."
                   pulling-text="更多消息" id="refresh">
    </ion-refresher>
    <p style="text-align: center" ng-if="nomore === 'true'" ng-click="skipmessagebox()">更多消息请在历史消息中查阅</p>
    <div>
      <div ng-repeat="msgSingle in msgs">
        <!---时间戳--->
        <div ng-if="(msgSingle.from === 'true') &&(msgSingle.senderid === myUserID)">
        <p style="height:20px;width:50px;background-color:#c2ccd1;margin:3px auto;" ng-if="msgSingle.istime === 'true' && msgSingle.daytype ==='1' " align="center">{{msgSingle.when | date:'HH:mm'}}</p>
        <p style="height:20px;width:150px;background-color: #c2ccd1;margin: 3px auto;" ng-if="msgSingle.istime === 'true' && msgSingle.daytype ==='0' "align="center">{{msgSingle.when | date:'yyyy-MM-dd HH:mm'}}</p>
        </div>
        <!--对方发送消息时必须判断接收者id是否跟userId一致：聊天对象id-->
        <div class="rj-message-wrap" ng-if="(msgSingle.from==='false') &&(msgSingle.sessionid === userId)">
          <!---时间戳--->
          <div >
            <p style="height:20px;width:50px;background-color:#c2ccd1;margin:3px auto;" ng-if="msgSingle.istime === 'true' && msgSingle.daytype ==='1' " align="center">{{msgSingle.when | date:'HH:mm'}}</p>
            <p style="height:20px;width:150px;background-color: #c2ccd1;margin: 3px auto;" ng-if="msgSingle.istime === 'true' && msgSingle.daytype ==='0' "align="center">{{msgSingle.when | date:'yyyy-MM-dd HH:mm'}}</p>
          </div>


          <div
            ng-if="msgSingle.sessionid.substring((msgSingle.sessionid.length-1),msgSingle.sessionid.length)==1||msgSingle.sessionid.substring((msgSingle.sessionid.length-1),msgSingle.sessionid.length)==9"
            class=" circle1" style=" position: absolute;left: 3%;font-size: 14px;padding-top: 9px"
            ng-click="godetail(msgSingle.sessionid)"> {{msgSingle.username.length > 2 ?
            msgSingle.username.substring((msgSingle.username.length-2),msgSingle.username.length):msgSingle.username}}
          </div>


          <div
            ng-if="msgSingle.sessionid.substring((msgSingle.sessionid.length-1),msgSingle.sessionid.length)==2||msgSingle.sessionid.substring((msgSingle.sessionid.length-1),msgSingle.sessionid.length)==8"
            class=" circle2" style=" position: absolute;left: 3%;font-size: 14px;padding-top: 9px"
            ng-click="godetail(msgSingle.sessionid)"> {{msgSingle.username.length > 2 ?
            msgSingle.username.substring((msgSingle.username.length-2),msgSingle.username.length):msgSingle.username}}
          </div>


          <div
            ng-if="msgSingle.sessionid.substring((msgSingle.sessionid.length-1),msgSingle.sessionid.length)==3||msgSingle.sessionid.substring((msgSingle.sessionid.length-1),msgSingle.sessionid.length)==7"
            class=" circle3" style=" position: absolute;left: 3%;font-size: 14px;padding-top: 9px"
            ng-click="godetail(msgSingle.sessionid)">  {{msgSingle.username.length > 2 ?
            msgSingle.username.substring((msgSingle.username.length-2),msgSingle.username.length):msgSingle.username}}
          </div>


          <div
            ng-if="msgSingle.sessionid.substring((msgSingle.sessionid.length-1),msgSingle.sessionid.length)==4||msgSingle.sessionid.substring((msgSingle.sessionid.length-1),msgSingle.sessionid.length)==6"
            class=" circle4" style=" position: absolute;left: 3%;font-size: 14px;padding-top: 9px"
            ng-click="godetail(msgSingle.sessionid)">{{msgSingle.username.length > 2 ?
            msgSingle.username.substring((msgSingle.username.length-2),msgSingle.username.length):msgSingle.username}}
          </div>


          <div
            ng-if="msgSingle.sessionid.substring((msgSingle.sessionid.length-1),msgSingle.sessionid.length)==5||msgSingle.sessionid.substring((msgSingle.sessionid.length-1),msgSingle.sessionid.length)==0"
            class=" circle5" style=" position: absolute;left: 3%;font-size: 14px;padding-top: 9px"
            ng-click="godetail(msgSingle.sessionid)">{{msgSingle.username.length > 2 ?
            msgSingle.username.substring((msgSingle.username.length-2),msgSingle.username.length):msgSingle.username}}
          </div>


          <!--<img src="img/mike.png" class="rj-head-pic">-->
          <span>
            <!---接收图片ui--->
            <p class="rj-message" style="margin-left: 14.5%;background-color: rgba(255, 255, 255, 0)" ng-if="msgSingle.messagetype === 'Image'">
              <img src="{{msgSingle.message.split('###')[1]}}" style="width: 110px;" class="yuanjiao"
              ng-click="netScaleImage(msgSingle.message.split('###')[0],msgSingle.message.split('###')[4],msgSingle.message.split('###')[1])"/></p>
            <!--<p class="rj-message" style="margin-left: 14.5%" ng-if="msgSingle.messagetype === 'LOCATION'"><img
              src="img/beifengwolu.jpg" style="width: 110px;" class="yuanjiao" ng-click="entermap(msgSingle.message)"/></p>-->
              <!--ng-click="netScaleImage(msgSingle.message.split('###')[0],msgSingle.message.split('###')[4],msgSingle.message.split('###')[1])"/>-->
            </p>
            <!---接收位置ui--->
            <!--<p class="rj-message" style="margin-left: 14.5%" ng-if="msgSingle.messagetype === 'LOCATION'"><img-->
              <!--src="img/beifengwolu.jpg" style="width: 110px;" class="yuanjiao" ng-click="entermap(msgSingle.message)"/>-->
            <!--</p>-->
            <!---接收文本ui--->
            <p class="rj-message" style="margin-left: 14.5%"
               ng-if="msgSingle.messagetype === 'normal' || msgSingle.messagetype === 'Text'">{{msgSingle.message}}
            </p>
            <!---接收文件ui--->
            <p ng-if="msgSingle.messagetype === 'File'">
            <img ng-src="{{msgSingle.message.split('###')[1]}}"
                 ng-if="msgSingle.messagetype === 'File' && getFileType(msgSingle.message)"
                 style="width: 110px;margin-left: 14.5%;" class="yuanjiao"/>
            <div class="list" ng-if="msgSingle.messagetype === 'File' && !getFileType(msgSingle.message)"
                 style="width: 230px;background-color: #888888;float: left;margin-left: 14.5%;">
              <a class="item item-icon-left"
                 ng-click="openAllFile(msgSingle.message.split('###')[1], msgSingle)">
                <img class="icon" ng-src="{{getFileTypeImg(msgSingle.message)}}"
                     style="width: 55px;padding-top: 10px;padding-bottom: 10px;"/><font
                style="font-size: 10px;border: none;margin-left: 15px;">{{getFileName(msgSingle.message)}}<br/><div ng-show="msgSingle.message.split('###')[5] != '0' && msgSingle.message.split('###')[5] != '100' && msgSingle.message.split('###')[5] != '-1'" class="outbar" style="margin-top: 10px;margin-left: 15px;"><div class="inbar" style="width:{{msgSingle.message.split('###')[5]}}%;background:#5CB85C;"></div></div><span ng-show="msgSingle.message.split('###')[5] != '0' && msgSingle.message.split('###')[5] != '100' && msgSingle.message.split('###')[5] != '-1'">&nbsp;&nbsp;{{msgSingle.message.split('###')[5]}}%</span><span ng-show="msgSingle.message.split('###')[5] === '100'" style="color: #5CB85C;margin-left: 15px;">已下载</span><span ng-show="msgSingle.message.split('###')[5] === '0'" style="margin-left: 15px;">未下载</span><span ng-show="msgSingle.message.split('###')[5] === '-1'" style="color: #ee0500;margin-left: 15px;">下载失败！</span></font>
              </a>
            </div>
            <div ng-if="msgSingle.messagetype === 'File' && !getFileType(msgSingle.message)" style="float: none;"></div>
            </p>
            <!--LOCATION RECEIVE-->
            <p ng-if="msgSingle.messagetype === 'LOCATION'">
            <div class="list" ng-if="msgSingle.messagetype === 'LOCATION'"
                 style="width: 230px;background-color: #888888;float: left;margin-left: 14.5%;">
              <a class="item item-icon-left"
                 ng-click="entermap(msgSingle.message)">
                <img class="icon" ng-src="{{getFileTypeImg('location')}}"
                     style="width: 55px;padding-top: 10px;padding-bottom: 10px;"/><font
                style="font-size: 10px;border: none;margin-left: 20px;">{{msgSingle.message.split(',')[2]}}<br/><span style="margin-left: 20px;">已接收</span></font>
              </a>
            </div>
            <div ng-if="msgSingle.messagetype === 'LOCATION'" style="float: none;"></div>
            </p>

            <!---接收语音--->
            <p class="rj-message" style="margin-left: 14.5%;width: 120px;" ng-if="msgSingle.messagetype != 'Audio'" >
              <img src="img/voice_right3.png" style="width: 20px;height: 20px;margin-top:3px;margin-bottom: 3px;" class="yuanjiao" align="left"/>
            </p>
          </span>

        </div>



        <div class="rj-message-wrap" ng-if="(msgSingle.from === 'true') &&(msgSingle.senderid === myUserID)">
          <!--<div class="circle6" style=" position: absolute;left: 86%;top: 17px;font-size: 14px;text-align: center;padding-top: 9px">{{msgSingle.username.length > 2 ? msgSingle.username.substring((msgSingle.username.length-2),msgSingle.username.length):msgSingle.username}}</div>-->
          <!--<img src="{{imgPath}}" />-->
          <span class="rj-triangle-right"
                ng-if="msgSingle.messagetype === 'Text' || msgSingle.messagetype === 'normal'">
          </span>
          <span>
          <!--<img style="margin-right: 5px;position: relative;right: 0px;" src="img/red.png" align="left">-->
          <p style="float: right">
            <!---发送图片的ui--->
            <font ng-if="msgSingle.messagetype === 'Image'">
              <img style="background-color: transparent;margin-left: -30px" src="img/red.png"
                   ng-if="msgSingle.isFailure ==='true'"
                   ng-click="resendshow(userId,msgSingle.message, userId, localusr,myUserID,msgSingle._id,              msgSingle)"/>
              <ion-spinner icon="ios-small"
                           style="background-color: transparent;margin-left: -35px;position: relative;vertical-align: middle"
                           ng-if="msgSingle.isSuccess === 'false'&& msgSingle.isFailure === 'false' "></ion-spinner>
              <img src="{{msgSingle.message.split('###')[1]}}" style="width: 110px;" class="yuanjiao"
                   ng-click="boostImage(msgSingle.message.split('###')[1])"/>
            </font>

            <!---发送文件的ui--->
            <font ng-if="msgSingle.messagetype === 'File'">
            <img ng-src="{{msgSingle.message.split('###')[1]}}"
                 ng-if="msgSingle.messagetype === 'File' && getFileType(msgSingle.message)" style="width: 110px;"
                 class="yuanjiao" ng-click="boostImage(msgSingle.message.split('###')[1])"/>
            <div class="list" ng-if="msgSingle.messagetype === 'File' && !getFileType(msgSingle.message)"
                 style="width: 230px;background-color: #888888;float: right">
              <a class="item item-icon-left" ng-if="msgSingle.isFailure != 'true'"
                 ng-click="openAllFile(msgSingle.message.split('###')[1],msgSingle)">
                <img class="icon" ng-src="{{getFileTypeImg(msgSingle.message)}}"
                     style="width: 55px;padding-top: 10px;padding-bottom: 10px;"/>
                <font style="font-size: 10px;border: none;margin-left: 15px;">{{msgSingle.message.split('###')[4]}}
                  <br/><!--{{msgSingle.message.split('###')[3]}}--> <!--{{msgSingle.message.split('###')[5]}}--><div ng-show="msgSingle.message.split('###')[5] != '100' && msgSingle.message.split('###')[5] != '-1'" class="outbar" style="margin-top: 10px;margin-left: 15px;"><div class="inbar" style="width:{{msgSingle.message.split('###')[5]}}%;background:#5CB85C;"></div></div><span ng-show="msgSingle.message.split('###')[5] != '100' && msgSingle.message.split('###')[5] != '-1'">&nbsp;&nbsp;{{msgSingle.message.split('###')[5]}}%</span>
                  &nbsp;&nbsp;<span ng-if="msgSingle.isFailure === 'true' || msgSingle.message.split('###')[5] === '-1'" style="color: #ee0500;margin-left: 15px;">发送失败！</span><span ng-if="msgSingle.isFailure === 'false' && msgSingle.message.split('###')[5] === '100'" style="color: #5CB85C;margin-left: 15px;">发送成功！</span>
                </font>
              </a>
              <a class="item item-icon-left" ng-if="msgSingle.isFailure === 'true'"
                 ng-click="resendshow(userId,msgSingle.message, userId, localusr,myUserID,msgSingle._id,msgSingle)">
                <img class="icon" ng-src="{{getFileTypeImg(msgSingle.message)}}"
                     style="width: 35px;padding-top: 10px;padding-bottom: 10px;"/>
                <font style="font-size: 10px;border: none;margin-left: 15px;">{{msgSingle.message.split('###')[4]}}
                  <br/>{{msgSingle.message.split('###')[3]}}
                  &nbsp;&nbsp;<span ng-if="msgSingle.isFailure === 'true'" style="color: #ee0500;margin-left: 15px;">发送失败！</span>
                </font>
              </a>
            </div>
            <div ng-if="msgSingle.messagetype === 'File' && !getFileType(msgSingle.message)" style="float: none;">
            </div>
          </font>

            <!--LOCATION-->
            <font ng-if="msgSingle.messagetype === 'LOCATION'">
            <div class="list" ng-if="msgSingle.messagetype === 'LOCATION'"
                 style="width: 230px;background-color: #888888;float: right">
              <a class="item item-icon-left" ng-if="msgSingle.isFailure != 'true'"
                 ng-click="entermap(msgSingle.message.substring(0, msgSingle.message.lastIndexOf(',')))">
                <img class="icon" ng-src="{{getFileTypeImg('location')}}"
                     style="width: 55px;padding-top: 10px;padding-bottom: 10px;"/>
                <font style="font-size: 10px;border: none;margin-left: 20px;">{{msgSingle.message.split(',')[2]}}
                  <br/><span style="margin-left: 20px;">点击查看</span>
                  &nbsp;&nbsp;<!--<span ng-if="msgSingle.isFailure === 'false'" style="color: #5cb85c;">发送成功！</span>-->
                </font>
              </a>
              <a class="item item-icon-left" ng-if="msgSingle.isFailure === 'true'"
                 ng-click="resendshow(userId,msgSingle.message, userId, localusr,myUserID,msgSingle._id,msgSingle)">
                <img class="icon" ng-src="{{getFileTypeImg('location')}}"
                     style="width: 55px;padding-top: 10px;padding-bottom: 10px;"/>
                <font style="font-size: 10px;border: none;margin-left: 5px;">{{msgSingle.message.split(',')[2]}}
                  <br/><span style="margin-left: 20px;">点击查看</span>
                  &nbsp;&nbsp;<!--<span ng-if="msgSingle.isFailure === 'true'" style="color: #ee0500;">发送失败！</span>-->
                </font>
              </a>
            </div>
            <div ng-if="msgSingle.messagetype === 'LOCATION'" style="float: none;">
            </div>
          </font>
            <font class="rj-message-right" ng-if="msgSingle.messagetype != 'Audio' && isyuyinshow === 'true'" style="width: 120px;">
              <img style="background-color: transparent;margin-left: -30px" src="img/red.png"
                   ng-if="msgSingle.isFailure ==='true'"
                   ng-click="resendshow(userId,msgSingle.message, userId, localusr,myUserID,msgSingle._id,msgSingle)"/>
              <ion-spinner icon="ios-small"
                           style="background-color: transparent;margin-left: -35px;position: relative;vertical-align: middle"
                           ng-if="msgSingle.isSuccess === 'false'&& msgSingle.isFailure === 'false' "></ion-spinner>
              <img  src="img/voice_left3.png" style="width: 20px;height: 20px;margin-top:3px;margin-bottom: 3px;" class="yuanjiao" align="right" ng-click="showanimation();"/>
              <div ng-if="isshowaudio === 'true'" ng-repeat="no in numlist">
                {{no.no}}
                <img ng-show="no.no === 1" ng-hide="no.no !=1" src="img/voice_left1.png" style="width: 20px;height: 20px;margin-top:3px;margin-bottom: 3px;" class="yuanjiao" align="right"/>
                <!--<img ng-show="no.no === 1" src="img/voice_left2.png" style="width: 20px;height: 20px;margin-top:3px;margin-bottom: 3px;" class="yuanjiao" align="right"/>-->
                <!--<img ng-show="no.no === 3" src="img/voice_left3.png" style="width: 20px;height: 20px;margin-top:3px;margin-bottom: 3px;" class="yuanjiao" align="right"/>-->
              </div>
            </font>
            <!----发送位置的ui-->
            <!--<font ng-if="msgSingle.messagetype === 'LOCATION'" style="float:right;">
              <img style="background-color: transparent;margin-left: -24px" src="img/red.png"
                   ng-if="msgSingle.isFailure ==='true' &&(msgSingle.messagetype != 'Image' && msgSingle.messagetype != 'File')"
                   ng-click="resendshow(userId,msgSingle.message, userId, localusr,myUserID,msgSingle._id)"/>
              <ion-spinner icon="ios-small"
                           style="background-color: transparent;margin-left: -35px;position: relative;vertical-align: middle"
                           ng-if="msgSingle.isSuccess === 'false'&& msgSingle.isFailure === 'false' "></ion-spinner>
              <img
                src="{{msgSingle.message.substring(msgSingle.message.lastIndexOf(',') + 1, msgSingle.message.length)}}"
                style="width: 110px;" class="yuanjiao"
                ng-click="entermap(msgSingle.message.substring(0, msgSingle.message.lastIndexOf(',')))"/>
              &lt;!&ndash;<script type="text/javascript">&ndash;&gt;
              &lt;!&ndash;var locationvalue=document.getElementById("msg").innerText;&ndash;&gt;
              &lt;!&ndash;alert("sdasfdsdf"+locationvalue);&ndash;&gt;
              &lt;!&ndash;var map = new BMap.Map("container"); // 创建地图实例&ndash;&gt;
              &lt;!&ndash;var point = new BMap.Point(locationvalue.substring(0,(locationvalue).indexOf(',')), locationvalue.substring((locationvalue).indexOf(',')+1,locationvalue.length)); // 创建点坐标&ndash;&gt;
              &lt;!&ndash;map.centerAndZoom(point, 15); // 初始化地图，设置中心点坐标和地图级别&ndash;&gt;
              &lt;!&ndash;</script>&ndash;&gt;

              &lt;!&ndash;<div id="container" ng-if="msgSingle.messagetype === 'LOCATION'" style="width: 210px;float:right;">&ndash;&gt;

              &lt;!&ndash;</div>&ndash;&gt;
              &lt;!&ndash;<div ng-if="msgSingle.messagetype === 'LOCATION'" style="float: none;"></div>&ndash;&gt;
            </font>-->

            <!---发送文本的ui--->
            <font class="rj-message-right"
                  ng-if="msgSingle.messagetype === 'normal' || msgSingle.messagetype === 'Text'" style="max-width: 300px;color: #ffffff">
              <img style="background-color: transparent;margin-left: -24px" src="img/red.png"
                   ng-if="msgSingle.isFailure ==='true' &&(msgSingle.messagetype != 'Image' && msgSingle.messagetype != 'File') && (msgSingle.isSuccess === 'false')"
                   ng-click="resendshow(userId,msgSingle.message, userId, localusr,myUserID,msgSingle._id,msgSingle)"/>
              <ion-spinner icon="ios-small"
                           style="background-color: transparent;margin-left: -35px;position: relative;vertical-align: middle"
                           ng-if="msgSingle.isSuccess === 'false'&& msgSingle.isFailure === 'false' "></ion-spinner>
              {{msgSingle.message}}
            </font>
          </p>
          </span>
          <!--<span class="rj-triangle-right"></span>-->
          <!--<span>-->
          <!--&lt;!&ndash;<img style="margin-right: 5px;position: relative;right: 0px;" src="img/red.png" align="left">&ndash;&gt;-->
          <!--<p style="margin-right: 10.5%"><font class="rj-message-right">{{msgSingle.message}}</font></p>-->
          <!--<img class="rj-message-right" style="margin-right: -2%;background-color: transparent" src="img/red.png" ng-if="(msgSingle.isFailure === 'true')"  ng-click="resendshow(userId,msgSingle.message, userId, localusr,msgSingle._id,msgSingle)">-->
          <!--</span>-->
        </div>
      </div>
    </div>
  </ion-content>

  <ion-footer-bar class="bar-light" style="height: auto">
    <div class="rj-footer-btn-wrap" style="margin-top: 37px">
      <button class="button button-icon icon ion-ios-mic-outline rj-footer-btn-left" ng-hide="isYuYin === 'true'" ng-click="clickOn()">
      </button>
      <img src="img/keybroad.png" class="button button-icon icon ion-ios-mic-outline rj-footer-btn-left" ng-show="isYuYin === 'true'" ng-click="clickOnChange()" >
      </img>
    </div>

    <div style="width: 72%;margin-top: 5px;position: relative;bottom: 0px;" ng-show="isYuYin === 'true'"  >
      <button style="margin-right: 45px;width:90%;height: 20px;" on-touch="showYuyin()" on-release="releaseYuyin()">
        按住请说话
      </button>
    </div>
    <div class="item-input rj-footer-btn-wrap" style="width: 72%" ng-show="isYuYin != 'true'" ng-click="zhiling()" >
      <textarea msd-elastic ng-model="send_content" style="margin-right: 45px"  >
      </textarea>
    </div>

    <div class="rj-footer-btn-wrap"><!--style="margin-left: 15px;margin-right: 5px"-->
      <div class="buttons rj-footer-btn-wrap" style="margin-top: 22px;width: 15px;height: 15px">
        <button class="rj-footer-btn button button-icon icon ion-happy-outline"></button>
      </div>
      <div class="buttons" ng-show="!send_content || send_content === ''" ng-click="gengduo()">
        <button class="button button-icon icon ion-ios-plus-outline rj-footer-btn-left">
        </button>
      </div>
      <div class="rj-send-button" ng-hide="!send_content || send_content === ''"
           ng-click="sendSingleMsg(userId,send_content, userId,localusr,myUserID,_id)">
        <p>发送</p>
      </div>
    </div>
    <br/>
    <div ng-if="a==1" style="height:200px;margin-left: -94%;margin-top: 5px">

      <div class="row" align="center">
        <!--<div id="butAlbum" ng-click="getPhoto('PHOTOLIBRARY',userId,send_content, userId,localusr,myUserID,_id)" class="col" align="center" style="padding: 16px">-->
        <div class="col" ng-click="takePhoto(userId,send_content, userId,localusr,myUserID,_id)" align="center"
             style="padding: 15px">
          <!--<div class="col" ng-click="getPhoto('CAMERA',userId,send_content, userId,localusr,myUserID,_id)" align="center" style="padding: 15px">-->
          <a>
            <ul>
              <li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/paizhao.png"
                                                                                                  style="width: 28px;height: 28px;align-content: center;margin-top: 9px">
              </li>
              <li style="color: #848484;font-size: 10px">拍照</li>
            </ul>
          </a>
        </div>
        <div id="butAlbum" ng-click="openDocumentWindow('image', userId,send_content, userId,localusr,myUserID,_id)"
             class="col" align="center" style="padding: 15px">
          <!--<div id="butAlbum" ng-click="getPhoto('PHOTOLIBRARY',userId,send_content, userId,localusr,myUserID,_id)" class="col" align="center" style="padding: 15px">-->
          <a>
            <ul>
              <li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/tupian.png"
                                                                                                  style="width: 28px;height: 28px;align-content: center;margin-top: 9px">
              </li>
              <li style="color: #848484;font-size: 10px">相册</li>
            </ul>
          </a>
        </div>
        <div class="col" align="center"
             ng-click="openDocumentWindow('*', userId,send_content, userId,localusr,myUserID,_id)"
             style="padding: 15px">
          <a>
            <ul>
              <li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/wenjian.png"
                                                                                                  style="width: 28px;height: 28px;align-content: center;margin-top: 9px">
              </li>
              <li style="color: #848484;font-size: 10px">文件</li>
            </ul>
          </a>
        </div>
        <div class="col" align="center" style="padding: 15px"
             ng-click="gogelocation('LOCATION',userId,send_content, userId,localusr,myUserID,_id,groupType)">
          <a>
            <ul>
              <li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/dingwei.png"
                                                                                                  style="width: 28px;height: 28px;align-content: center;margin-top: 9px">
              </li>
              <li style="color: #848484;font-size: 10px">定位</li>
            </ul>
          </a>
        </div>

      </div>
      <!--<div class="row" style="margin-top: -22%">-->
      <!--<div class="col" align="center" ng-click="openDocumentWindow('video', userId,send_content, userId,localusr,myUserID,_id)" style="padding: 15px">-->
      <!--<a>-->
      <!--<ul>-->
      <!--<li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/shipin.png" style="width: 28px;height: 28px;align-content: center;margin-top: 9px"></li>-->
      <!--<li style="color: #848484;font-size: 10px">视频</li>-->
      <!--</ul>-->
      <!--</a>-->
      <!--</div>-->
      <!--<div class="col" align="center" ng-click="openDocumentWindow('audio', userId,send_content, userId,localusr,myUserID,_id)" style="padding: 15px">-->
      <!--<a>-->
      <!--<ul>-->
      <!--<li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/yinpin.png" style="width: 28px;height: 28px;align-content: center;margin-top: 9px"></li>-->
      <!--<li style="color: #848484;font-size: 10px">音频</li>-->
      <!--</ul>-->
      <!--</a>-->
      <!--</div>-->
      <!--<div class="col" align="center" style="padding: 15px">-->
      <!--<a>-->
      <!--<ul>-->
      <!--<li style="height: 50px;width: 50px;align-content: center"> </li>-->
      <!--<li style="color: #848484;font-size: 10px"> </li>-->
      <!--</ul>-->
      <!--</a>-->
      <!--</div>-->
      <!--<div class="col" align="center" style="padding: 15px">-->
      <!--<a>-->
      <!--<ul>-->
      <!--<li style="height: 50px;width: 50px;align-content: center"> </li>-->
      <!--<li style="color: #848484;font-size: 10px"> </li>-->
      <!--</ul>-->
      <!--</a>-->
      <!--</div>-->
    </div>


    <!--<div class="row" align="center">
      <div id="butAlbum" ng-click="getPhoto('PHOTOLIBRARY',userId,send_content, userId,localusr,myUserID,_id)" class="col" align="center" style="padding: 16px">
        <a>
          <ul>
            <li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/tupian.png" style="width: 28px;height: 28px;align-content: center;margin-top: 9px"></li>
            <li style="color: #848484;font-size: 10px">图片</li>
          </ul>
        </a>
      </div>
      <div class="col" align="center" ng-click="openDocumentWindow(userId,send_content, userId,localusr,myUserID,_id)" style="padding: 15px">
        <a>
          <ul>
            <li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/wenjian.png" style="width: 28px;height: 28px;align-content: center;margin-top: 9px"></li>
            <li style="color: #848484;font-size: 10px">文件</li>
          </ul>
        </a>
      </div>
      <div class="col" align="center" style="padding: 15px" ng-click="gogelocation('LOCATION',userId,send_content, userId,localusr,myUserID,_id,groupType)">
        <a>
          <ul>
            <li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/dingwei.png" style="width: 28px;height: 28px;align-content: center;margin-top: 9px"></li>
            <li style="color: #848484;font-size: 10px">定位</li>
          </ul>
        </a>
      </div>-->
    <!--<div class="col" align="center" style="padding: 15px">-->
    <!--<a>-->
    <!--<ul>-->
    <!--<li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/dingwei.png" style="width: 28px;height: 28px;align-content: center;margin-top: 9px"></li>-->
    <!--<li style="color: #848484;font-size: 10px">定位</li>-->
    <!--</ul>-->
    <!--</a>-->
    <!--</div>-->
    <!--</div>-->
    <!--<div class="row" style="margin-top: -22%">-->
    <!--<div class="col" align="center" style="padding: 15px">-->
    <!--<a>-->
    <!--<ul>-->
    <!--<li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/tupian.png" style="width: 28px;height: 28px;align-content: center;margin-top: 9px"></li>-->
    <!--<li style="color: #848484;font-size: 10px">图片</li>-->
    <!--</ul>-->
    <!--</a>-->
    <!--</div>-->
    <!--<div class="col" align="center" style="padding: 15px">-->
    <!--<a>-->
    <!--<ul>-->
    <!--<li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/wenjian.png" style="width: 28px;height: 28px;align-content: center;margin-top: 9px"></li>-->
    <!--<li style="color: #848484;font-size: 10px">文件</li>-->
    <!--</ul>-->
    <!--</a>-->
    <!--</div>-->
    <!--<div class="col" align="center" style="padding: 15px">-->
    <!--<a>-->
    <!--<ul>-->
    <!--<li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/dingwei.png" style="width: 28px;height: 28px;align-content: center;margin-top: 9px"></li>-->
    <!--<li style="color: #848484;font-size: 10px">定位</li>-->
    <!--</ul>-->
    <!--</a>-->
    <!--</div>-->
    <!--<div class="col" align="center" style="padding: 15px">-->
    <!--<a>-->
    <!--<ul>-->
    <!--<li style="height: 50px;width: 50px;align-content: center" class="squareliao1"><img src="img/dingwei.png" style="width: 28px;height: 28px;align-content: center;margin-top: 9px"></li>-->
    <!--<li style="color: #848484;font-size: 10px">定位</li>-->
    <!--</ul>-->
    <!--</a>-->
    <!--</div>-->
    <!--</div>-->
    <!--</div>-->
  </ion-footer-bar>
  <!--ion-image-->


</ion-view>

